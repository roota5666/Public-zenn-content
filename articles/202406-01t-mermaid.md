---
title: "å›³ã‚’mermaidè¨˜æ³•ã§æ›¸ã"
emoji: "ğŸ§œğŸ»â€â™€ï¸"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [mermaid,markdown]
published: true
url: "https://zenn.dev/roota5666/articles/202406-01t-mermaid"
date: 2024-05-01
update: 2024-06-11
tags: 
  - "#yyyy-mm/2024-06"
  - "#web/site/zenn"
  - "#tech/markdown"
  - "#tech/markdown/mermaid"
aliases: 
  - "è¨˜äº‹ã€Œå›³ã‚’mermaidè¨˜æ³•ã§æ›¸ãã€"
---

## ã¯ã˜ã‚ã«

Markdownã§ä½¿ãˆã‚‹ä¾¿åˆ©ãªmermaidè¨˜æ³•ã¯ã€æ–‡å­—ã§è¨˜è¼‰ã—å›³å½¢ã‚’æç”»ã§ãã¾ã™ã€‚  

### ç¨®é¡

ç¨®é¡ã¯[å…¬å¼ã‚µã‚¤ãƒˆ](https://mermaid.js.org/)ã«è¨˜è¼‰ã•ã‚Œã¦ã„ã‚‹ä¸‹è¨˜ã®é€šã‚Šã§ã™ã€‚

| #   | Diagram Syntax                                                                              |
| :-- | :-------------------------------------------------------------------------------------------|
| 1   | [Basic flowchart](https://mermaid.js.org/syntax/flowchart.html#flowcharts-basic-syntax)     |
| 2   | [Sequence diagrams](https://mermaid.js.org/syntax/sequenceDiagram.html)                     |
| 3   | [Class diagrams](https://mermaid.js.org/syntax/classDiagram.html)                           |
| 4   | [State Diagram](https://mermaid.js.org/syntax/stateDiagram.html)                            |
| 5   | [Entity Relationship Diagram](https://mermaid.js.org/syntax/entityRelationshipDiagram.html) |
| 6   | [User Journey](https://mermaid.js.org/syntax/userJourney.html)                              |
| 7   | [Gantt](https://mermaid.js.org/syntax/gantt.html)                                           |
| 8   | [Pie Chart](https://mermaid.js.org/syntax/pie.html)                                         |
| 9   | [Quadrant Chart](https://mermaid.js.org/syntax/quadrantChart.html)                          |
| 10  | [Requirement Diagram](https://mermaid.js.org/syntax/requirementDiagram.html)                |
| 11  | [Gitgraph (Git) Diagram](https://mermaid.js.org/syntax/gitgraph.html)                       |
| 12  | [C4 Diagram](https://mermaid.js.org/syntax/c4.html)                                         |
| 13  | [Mindmaps](https://mermaid.js.org/syntax/mindmap.html)                                      |
| 14  | [Timeline](https://mermaid.js.org/syntax/timeline.html)                                     |
| 15  | [Sankey](https://mermaid.js.org/syntax/sankey.html)                                         |
| 16  | [XYChart](https://mermaid.js.org/syntax/xyChart.html)                                       |
| 17  | [Block Diagram](https://mermaid.js.org/syntax/block.html)                                   |

ä»¥ä¸‹ã€mermaidã§è¨˜è¿°ã—ãŸå›³/ä½µã›ã¦mermaidã®codeã‚’è¨˜è¼‰ã—ã¾ã™ã€‚

## [Basic flowchart](https://mermaid.js.org/syntax/flowchart.html#flowcharts-basic-syntax) - åŸºæœ¬ãƒ•ãƒ­ãƒ¼ãƒãƒ£ãƒ¼ãƒˆ

- åŸºæœ¬

  ```mermaid
  graph TD;
      A-->B;
      A-->C;
      B-->D;
      C-->D;
  ```

  :::details code

  ````text
  ```mermaid
  graph TD;
      A-->B;
      A-->C;
      B-->D;
      C-->D;
  ```
  ````

  :::

### DBã‚µãƒ¼ãƒ Primary/Secondaryæ§‹æˆåˆ‡ã‚Šæ›¿ã‚ã‚Š

- é€šå¸¸æ™‚

  ```mermaid
  flowchart LR
      LB[LoadBalancer]
      LB --> A[Web1]
      LB --> B[Web2]
      LB --> C[Web3]
      LB --> D[Web4]
      A --> VIP
      B --> VIP
      C --> VIP
      D --> VIP
      subgraph "DB Cluster"
          VIP == P ==> DB1[(DB1)]
          VIP -- S --x DB2[(DB2)]
          Annotation[P:Primary<br>S:secondary]
      end
  ```

  :::details code

  ````text
  ```mermaid
  flowchart LR
      LB[LoadBalancer]
      LB --> A[Web1]
      LB --> B[Web2]
      LB --> C[Web3]
      LB --> D[Web4]
      A --> VIP
      B --> VIP
      C --> VIP
      D --> VIP
      subgraph "DB Cluster"
          VIP == P ==> DB1[(DB1)]
          VIP -- S --x DB2[(DB2)]
          Annotation[P:Primary<br>S:secondary]
      end
  ```
  ````

  :::

- éšœå®³æ™‚

  ```mermaid
  flowchart LR
      LB[LoadBalancer]
      LB --> A[Web1]
      LB --> B[Web2]
      LB --> C[Web3]
      LB --> D[Web4]
      A --> VIP
      B --> VIP
      C --> VIP
      D --> VIP
      subgraph "DB Cluster"
          VIP -- S --x DB1[(DB1)]
          VIP -- P --> DB2[(DB2)]
          Annotation[P:Primary<br>S:secondary]
      end
  
      classDef classA fill:#f00,stroke:#fff,stroke-width:5px;
      class DB1 classA;
  ```

  :::details code

  ````text
  ```mermaid
  flowchart LR
      LB[LoadBalancer]
      LB --> A[Web1]
      LB --> B[Web2]
      LB --> C[Web3]
      LB --> D[Web4]
      A --> VIP
      B --> VIP
      C --> VIP
      D --> VIP
      subgraph "DB Cluster"
          VIP -- S --x DB1[(DB1)]
          VIP -- P --> DB2[(DB2)]
          Annotation[P:Primary<br>S:secondary]
      end
  
      classDef classA fill:#f00,stroke:#fff,stroke-width:5px;
      class DB1 classA;
  ```
  ````

  :::

### Azure - ApplicationGatewayæ§‹æˆ

```mermaid
flowchart LR
    subgraph "Internet"
        UserA
    end
    Internet -- example.com --> FrontIP

subgraph "ApplicationGateway"

    FrontIP --> Rule1
    FrontIP --> Rule2

    subgraph "Rule1"
        Lister1[Lister]
        Backendport1["Backendport<br/>tcp/80"]
    end
    subgraph "BackEndPool1"
        az-wb-p01
        az-wb-p02
    end
    Rule1 --> az-wb-p01
    Rule1 --> az-wb-p02
end
```

:::details code

````text
```mermaid
flowchart LR
    subgraph "Internet"
        UserA
    end
    Internet -- example.com --> FrontIP

subgraph "ApplicationGateway"

    FrontIP --> Rule1
    FrontIP --> Rule2

    subgraph "Rule1"
        Lister1[Lister]
        Backendport1["Backendport<br/>tcp/80"]
    end
    subgraph "BackEndPool1"
        az-wb-p01
        az-wb-p02
    end
    Rule1 --> az-wb-p01
    Rule1 --> az-wb-p02
end
```
````

:::

### å‡¦ç†ãƒ•ãƒ­ãƒ¼ ãƒ«ãƒ¼ãƒ—ã‚ã‚Šãƒãƒ¼ã‚¸ãƒ§ãƒ³

```mermaid
graph TD

N[å¤‰æ•°ï¼šNå›å®Ÿè¡Œã™ã‚‹æŒ‡å®š]
A[é–‹å§‹] --> B

subgraph "loop2"
    B[ãƒ«ãƒ¼ãƒ—2é–‹å§‹] --> C[click 266 836]
    C --> D[delay 500]
    E{ãƒ«ãƒ¼ãƒ—2<br>Nå›å®Ÿè¡Œã—ãŸï¼Ÿ} -->|ã¯ã„| F[ãƒ«ãƒ¼ãƒ—2å®Œäº†]
    E --> |ã„ã„ãˆ|B
end

D --> G
H --> E

subgraph "loop1"
    G[ãƒ«ãƒ¼ãƒ—1é–‹å§‹]
    G --> I["click 450 196"] --> J[delay 200] --> K
    K{ãƒ«ãƒ¼ãƒ—1<br>10å›å®Ÿè¡Œã—ãŸï¼Ÿ} --> |ã¯ã„| H[ãƒ«ãƒ¼ãƒ—1å®Œäº†]
    K --> |ã„ã„ãˆ|G
end
```

:::details code

````text
```mermaid
graph TD

N[å¤‰æ•°ï¼šNå›å®Ÿè¡Œã™ã‚‹æŒ‡å®š]
A[é–‹å§‹] --> B

subgraph "loop2"
    B[ãƒ«ãƒ¼ãƒ—2é–‹å§‹] --> C[click 266 836]
    C --> D[delay 500]
    E{ãƒ«ãƒ¼ãƒ—2<br>Nå›å®Ÿè¡Œã—ãŸï¼Ÿ} -->|ã¯ã„| F[ãƒ«ãƒ¼ãƒ—2å®Œäº†]
    E --> |ã„ã„ãˆ|B
end

D --> G
H --> E

subgraph "loop1"
    G[ãƒ«ãƒ¼ãƒ—1é–‹å§‹]
    G --> I["click 450 196"] --> J[delay 200] --> K
    K{ãƒ«ãƒ¼ãƒ—1<br>10å›å®Ÿè¡Œã—ãŸï¼Ÿ} --> |ã¯ã„| H[ãƒ«ãƒ¼ãƒ—1å®Œäº†]
    K --> |ã„ã„ãˆ|G
end
```
````

:::

### å®¶ç³»å›³

å®¶ç³»å›³ã‚’mermaidã§æ›¸ã„ã¦ã¿ãŸã‚µã‚¤ãƒˆãŒã‚ã‚Šã¾ã—ãŸã€‚ãªã‹ãªã‹ãŠã‚‚ã—ã‚ã„ã€‚  
å‚è€ƒã«ã—ãŸã‚µã‚¤ãƒˆ [ãƒ•ã‚¯ãƒ­ãƒ¢ãƒ¢ãƒ³ã‚¬å®¶ç³»å›³.md](https://gist.github.com/gelehrtecrest/ab4f6188602ec3b70f2bfd85e6a4af99)

ä¸€ä¸–ä»£ã®ã¿ã®ç°¡æ˜“ãªå®¶ç³»å›³

```mermaid
graph TB;
    subgraph å®¶ç³»å›³
        father_with_mother["çˆ¶"] --> father_mother((çˆ¶ã¨æ¯ã®å­))
        mother_with_father["æ¯"] --> father_mother((çˆ¶ã¨æ¯ã®å­))
        father_mother((çˆ¶ã¨æ¯ã®å­)) --> father_mother1["å­"]
    end
```

:::message
ã‚³ãƒ©ãƒ 
ãªãœã€**çˆ¶ã¨æ¯ã®å­** ã¨ã„ã†ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒå¿…è¦ãªã®ã‹ï¼Ÿ  
**çˆ¶ã¨æ¯ã®å­** ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãªã—ã§è¨˜è¼‰ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

```mermaid
graph TB;

    subgraph å®¶ç³»å›³
        father_with_mother["çˆ¶"] --> father_mother1["å­"]
        mother_with_father["æ¯"] --> father_mother1["å­"]
    end
```

ã†ã¾ãã„ããã†ã§ã™ã­ã€‚  
3äººãªã‚‰ãƒ»ãƒ»ï¼Ÿ

```mermaid
graph TB;
    subgraph å®¶ç³»å›³
        father_with_mother["çˆ¶"] --> father_mother1["å­1"]
        mother_with_father["æ¯"] --> father_mother1["å­1"]
        father_with_mother["çˆ¶"] --> father_mother2["å­2"]
        mother_with_father["æ¯"] --> father_mother2["å­2"]
        father_with_mother["çˆ¶"] --> father_mother3["å­3"]
        mother_with_father["æ¯"] --> father_mother3["å­3"]
    end
```

ã¯ã„ã€è¤‡é›‘ï¼  
3äººä»¥ä¸Šã®å­ã©ã‚‚ãŒã„ã‚‹å ´åˆã¯ã€é–“ã«**çˆ¶ã¨æ¯ã®å­**ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æŒŸã‚€ã®ãŒã„ã„ã§ã™ã­ã€‚
:::

- ä¾‹ï¼‰ã‚µã‚¶ã‚¨ã•ã‚“å®¶ç³»å›³  
  äºŒä¸–ä»£ã®ä¾‹ã¨ã—ã¦ã€ã‚µã‚¶ã‚¨ã•ã‚“ä¸€å®¶ã‚’mermaidå½¢å¼ã§è¨˜è¿°

  ```mermaid
  graph TB;
      subgraph ç£¯é‡å®¶
          namihei_with_fune["æ³¢å¹³"] --> namihei_fune((æ³¢å¹³ã¨ãƒ•ãƒã®å­))
          fune_with_namihei["ãƒ•ãƒ"] --> namihei_fune
          namihei_fune --> namihei_fune1["é•·å¥³ï¼šã‚µã‚¶ã‚¨"]
          namihei_fune --> namihei_fune2["é•·ç”·ï¼šã‚«ãƒ„ã‚ª"]
          namihei_fune --> namihei_fune3["æ¬¡å¥³ï¼šãƒ¯ã‚«ãƒ¡"]
      end
  
      subgraph ãƒ•ã‚°ç”°å®¶
          namihei_fune1 --- sazae_with_masuo
          msuo_with_sazae["ãƒã‚¹ã‚ª"] --> msuo_sazae((ãƒã‚¹ã‚ªã¨ã‚µã‚¶ã‚¨))
          sazae_with_masuo["ã‚µã‚¶ã‚¨"] --> msuo_sazae
          msuo_sazae --> msuo_sazae1["ã‚¿ãƒ©ã‚ª"]
      end
  ```

## [Sequence diagrams](https://mermaid.js.org/syntax/sequenceDiagram.html) - ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³

### ã‚ˆãã‚ã‚‹æ¸…ç®—ãƒ•ãƒ­ãƒ¼

```mermaid
sequenceDiagram
    autonumber

    actor user as ç¤¾å“¡
    participant check1 as ãƒã‚§ãƒƒã‚¯1<br/>ãƒªãƒ¼ãƒ€ãƒ¼/ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼
    participant check2 as ãƒã‚§ãƒƒã‚¯2<br/>éƒ¨é–€é•·
    participant soumu as ç·å‹™

    user ->>+ check1: äº‹å‰ç”³è«‹
    check1 ->>+ check2: æ‰¿èª
    check2 ->>- user: æ‰¿èªæ¸ˆã¿
    user ->>+ check1: æ”¯æ‰•ã„ç”³è«‹
    Note right of user: é ˜åæ›¸æ·»ä»˜
    check1 ->>+ check2: æ‰¿èª
    check2 ->>+ soumu: æ‰¿èª
    soumu ->>+ user: æ”¯æ‰•ã„
```

::::details code

:::message
autonumber ã‚’è¨˜è¼‰ã™ã‚‹ã¨ã€è‡ªå‹•ã§ç•ªå·ã‚’ä»˜ä¸ã—ã¦ãã‚Œã‚‹(ä¾¿åˆ©)
:::

````text
```mermaid
sequenceDiagram
    autonumber

    actor user as ç¤¾å“¡
    participant check1 as ãƒã‚§ãƒƒã‚¯1<br/>ãƒªãƒ¼ãƒ€ãƒ¼/ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼
    participant check2 as ãƒã‚§ãƒƒã‚¯2<br/>éƒ¨é–€é•·
    participant soumu as ç·å‹™

    user ->>+ check1: äº‹å‰ç”³è«‹
    check1 ->>+ check2: æ‰¿èª
    check2 ->>- user: æ‰¿èªæ¸ˆã¿
    user ->>+ check1: æ”¯æ‰•ã„ç”³è«‹
    Note right of user: é ˜åæ›¸æ·»ä»˜
    check1 ->>+ check2: æ‰¿èª
    check2 ->>+ soumu: æ‰¿èª
    soumu ->>+ user: æ”¯æ‰•ã„
```
````

::::

## å‚è€ƒã‚µã‚¤ãƒˆ

- [Mermaid å…¥é–€ã—ã¦ã¿ãŸãƒ¡ãƒ¢(flowchart ã§åŠ›å°½ããŸâ€¦)](https://zenn.dev/okazuki/articles/learning-mermaid)
- [mermaidã§ãƒ•ãƒ­ãƒ¼ãƒãƒ£ãƒ¼ãƒˆã‚’æã](https://zenn.dev/yuriemori/articles/e097dbd950df86)
- [Mermaid ã§ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³ã‚’æ›¸ãæ–¹æ³•ã‚’è§£èª¬ï¼Notion AI ã«ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³ã‚’æ›¸ã„ã¦ã‚‚ã‚‰ã£ãŸã‚‰â€¦!? | ã‚­ã‚«ã‚¬ã‚¯ãƒ–ãƒ­ã‚°](https://www.kikagaku.co.jp/kikagaku-blog/mermaid-sequence/)
- [Mermaid.jsã§ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼å›³ã‚’æã](https://blog.naoty.dev/409/)
- [mermaid.jsã®ãƒ•ãƒ­ãƒ¼ãƒãƒ£ãƒ¼ãƒˆã®æ›¸ãæ–¹](https://ryuta46.com/516)
- [ã‚ˆãã‚ã‚‹AWSã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹æ§‹æˆã®ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³ã‚’Markdownï¼ˆMermaidï¼‰ã§æã„ã¦ã¿ãŸ | DevelopersIO](https://dev.classmethod.jp/articles/drawing-a-sequence-diagram-of-a-common-aws-serverless-configuration-with-mermaid/)
- [mermaid.js ã§ä¸Šæµå·¥ç¨‹ã‚’å¥½ãã«ãªã‚ã†](https://qiita.com/caesar_cat/items/e8a116a585863633d15a)
